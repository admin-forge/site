<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel - MC Admin Forge</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="admin-style.css">
</head>
<body>

<header>
  <div class="logo">MC Admin Forge - Admin</div>
  <nav>
    <button id="themeToggle">ðŸŒ“ ThÃ¨me</button>
  </nav>
</header>

<main>
  <section id="loginSection" class="card">
    <h3>Connexion Discord</h3>
    <div id="loginContent">
      <a class="discord-btn"
         href="https://discord.com/oauth2/authorize?client_id=1324712992910213150&response_type=code&redirect_uri=https%3A%2F%2Fadmin-forge.github.io%2Fsite%2Fadmin.html&scope=email+guilds.join">
        Se connecter
      </a>
    </div>
    <div id="welcomeMessage"></div>
  </section>

  <section class="card">
    <h3>Guides & Tutoriels</h3>
    <button onclick="alert('AccÃ©der aux guides')">GÃ©rer</button>
  </section>

  <section class="card">
    <h3>Outils</h3>
    <button onclick="alert('AccÃ©der aux outils')">GÃ©rer</button>
  </section>

  <section class="card">
    <h3>Assistant IA</h3>
    <button onclick="alert('GÃ©rer l\'assistant IA')">GÃ©rer</button>
  </section>

  <section class="card">
    <h3>Support / Tickets</h3>
    <button onclick="alert('Voir les tickets')">Voir</button>
  </section>

  <section class="card">
    <h3>Contributeurs</h3>
    <button onclick="alert('GÃ©rer les contributeurs')">GÃ©rer</button>
  </section>
</main>

<canvas id="confetti"></canvas>

<script>
// ThÃ¨me sombre (pas de mode clair)
const themeBtn = document.getElementById('themeToggle');
themeBtn.addEventListener('click', () => {
  document.body.classList.toggle('dark-theme');
});

// Login Discord
const urlParams = new URLSearchParams(window.location.search);
const code = urlParams.get('code');
const loginContent = document.getElementById('loginContent');
const welcomeMessage = document.getElementById('welcomeMessage');

function showUser(user) {
  loginContent.innerHTML = `
    <div class="user-info">
      <img src="${user.avatar}" alt="Avatar">
      <p>Pseudo : ${user.username}</p>
      <button class="logout-btn" id="logoutBtn">Se dÃ©connecter</button>
    </div>
  `;
  welcomeMessage.textContent = `Bienvenue, ${user.username} !`;
  welcomeMessage.style.opacity = 1;
  launchConfetti();

  document.getElementById('logoutBtn').addEventListener('click', () => {
    window.history.replaceState({}, document.title, window.location.pathname);
    loginContent.innerHTML = `
      <a class="discord-btn"
         href="https://discord.com/oauth2/authorize?client_id=1324712992910213150&response_type=code&redirect_uri=https%3A%2F%2Fadmin-forge.github.io%2Fsite%2Fadmin.html&scope=email+guilds.join">
        Se connecter
      </a>
    `;
    welcomeMessage.style.opacity = 0;
    welcomeMessage.textContent = '';
  });
}

if(code){
  const simulatedUser = {
    username: "MCAdmin",
    avatar: "https://cdn.discordapp.com/avatars/81384788765712384/2b5bfa9e7a6bb05d6c1e.png?size=128"
  };
  showUser(simulatedUser);
  window.history.replaceState({}, document.title, window.location.pathname);
}

// Confettis ðŸŽ‰
const canvas = document.getElementById("confetti");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
let confettiParticles = [];

function createConfetti() {
  const colors = ["#ff0a54","#ff477e","#ff7096","#ff85a1","#fbb1b9","#f9bec7"];
  for(let i=0;i<150;i++){
    confettiParticles.push({
      x: Math.random()*canvas.width,
      y: Math.random()*canvas.height - canvas.height,
      r: Math.random()*6+2,
      d: Math.random()*20+10,
      color: colors[Math.floor(Math.random()*colors.length)],
      tilt: Math.random()*10-10
    });
  }
}

function drawConfetti(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for(let i=0;i<confettiParticles.length;i++){
    let p = confettiParticles[i];
    ctx.beginPath();
    ctx.lineWidth = p.r;
    ctx.strokeStyle = p.color;
    ctx.moveTo(p.x + p.tilt + p.r/2, p.y);
    ctx.lineTo(p.x + p.tilt, p.y + p.tilt + p.r/2);
    ctx.stroke();
  }
  updateConfetti();
}

function updateConfetti(){
  for(let i=0;i<confettiParticles.length;i++){
    let p = confettiParticles[i];
    p.y += (Math.cos(0.01) + p.d/2);
    p.x += Math.sin(0.01);
    if(p.y > canvas.height){
      p.y = 0 - p.r;
      p.x = Math.random()*canvas.width;
    }
  }
}

let confettiInterval;
function launchConfetti(){
  createConfetti();
  confettiInterval = setInterval(drawConfetti, 20);
  setTimeout(()=>clearInterval(confettiInterval),5000);
}

window.addEventListener('resize', ()=>{
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});
</script>

</body>
</html>
